{% extends "gestion/base.html" %}

{% block title %}Reporte de Clientes{% endblock title %}

{% block content %}
<div class="container my-5">
    <h1 class="text-center mb-4">Listado de Clientes</h1>

    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>RUT</th>
                    <th>TelÃ©fono</th>
                    <th>Correo</th>
                    <th>DirecciÃ³n</th>
                    <th>Fecha Registro</th>
                    <th>Ãšltima Compra</th>
                </tr>
            </thead>
            <tbody>
                {% for cliente in clientes %}
                <tr>
                    <td>{{ cliente.id }}</td>
                    <td>{{ cliente.nombre }}</td>
                    <td>{{ cliente.rut|default:"N/A" }}</td> 
                    <td>{{ cliente.telefono|default:"N/A" }}</td>
                    <td>{{ cliente.correo }}</td>
                    <td>{{ cliente.direccion|default:"N/A" }}</td>
                    
                    {# ðŸš¨ AJUSTE: Muestra fecha Y hora del registro (date_joined es DateTime) #}
                    <td>{{ cliente.fecha_registro|default:"N/A"|date:"d/m/Y H:i" }}</td> 
                    
                    {# ðŸš¨ AJUSTE: Muestra fecha Y hora de la Ãºltima compra (fecha_venta es DateTime) #}
                    <td>
                        {% if cliente.ultima_compra %}
                            {{ cliente.ultima_compra|date:"d/m/Y H:i" }}
                        {% else %}
                            N/A
                        {% endif %}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="8" class="text-center text-muted">
                        No se encontraron clientes registrados.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock content %}